<!doctype html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>澳洲打工度假管理</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
</head>
<body>
    <div class="app-container">
        <header class="main-header">
            <h1>🦘 澳洲打工度假管理</h1>
        </header>

        <section class="card">
            <h2><i class="fas fa-coins"></i> 總資產估算 (現金 + 股票)</h2>
            <div class="asset-evaluation">
                <div class="eval-grid">
                    <div class="eval-item"><small>換算 AUD</small><div id="eval-aud" class="main-value">$ 0.00</div></div>
                    <div class="eval-item"><small>換算 TWD</small><div id="eval-twd" class="main-value">$ 0</div></div>
                    <div class="eval-item"><small>換算 USD</small><div id="eval-usd" class="main-value">$ 0.00</div></div>
                </div>
            </div>
            <div class="exchange-rate-info" id="exchange-info">
                <div class="rate-badge">1 AUD = 21.75 TWD</div>
                <div class="rate-badge">1 AUD = 0.692 USD</div>
                <div class="rate-badge">1 USD = 31.45 TWD</div>
            </div>
            <div class="currency-details">
                <div class="detail-title">可運用資產</div>
                <div class="currency-row"><span>AUD</span><span id="total-aud">$ 0.00</span></div>
                <div class="currency-row"><span>TWD</span><span id="total-twd">$ 0</span></div>
                <div class="currency-row"><span>USD</span><span id="total-usd">$ 0.00</span></div>
            </div>
        </section>

        <section class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h2 style="margin:0;"><i class="fas fa-chart-line"></i> 投資持倉摘要</h2>
                <button class="mini-btn" style="padding: 4px 10px; border-radius: 6px; border: 1px solid #ddd; background: #fff; font-size: 0.7rem;" onclick="toggleStockModal()">詳細資料</button>
            </div>
            <div class="invest-grid">
                <div class="invest-box"><small>澳股投入</small><span id="invest-aud">0.00</span></div>
                <div class="invest-box"><small>台股投入</small><span id="invest-twd">0</span></div>
                <div class="invest-box"><small>美股投入</small><span id="invest-usd">0.00</span></div>
            </div>
        </section>

        <section class="card">
            <h2><i class="fas fa-calendar-alt"></i> 簽證天數進度</h2>
            <div class="progress-row">
                <div class="progress-info"><span>二簽 (88天)</span><span id="days-2nd-text">0 / 88</span></div>
                <div class="progress-bar"><div class="progress-fill" id="progress-2nd" style="width: 0%"></div></div>
            </div>
            <div class="progress-row">
                <div class="progress-info"><span>三簽 (179天)</span><span id="days-3rd-text">0 / 179</span></div>
                <div class="progress-bar"><div class="progress-fill" id="progress-3rd" style="width: 0%"></div></div>
            </div>
            <button class="work-btn-large" onclick="addWorkDay()">不想上班但沒錢...</button>
        </section>

        <section class="card">
            <h2><i class="fas fa-exchange-alt"></i> 資產幣值轉換</h2>
            <div class="exchange-form">
                <div class="exchange-input-row">
                    <select id="ex-from" class="styled-select" onchange="updatePreview()">
                        <option value="AUD">AUD</option><option value="TWD">TWD</option><option value="USD">USD</option>
                    </select>
                    <div class="exchange-arrow"><i class="fas fa-chevron-right"></i></div>
                    <select id="ex-to" class="styled-select" onchange="updatePreview()">
                        <option value="TWD">TWD</option><option value="AUD">AUD</option><option value="USD">USD</option>
                    </select>
                </div>
                <div class="exchange-input-row mt-10">
                    <input type="number" id="ex-amount" placeholder="換出金額" oninput="updatePreview()" style="margin-bottom:0;">
                    <button class="btn-exchange" onclick="executeExchange()">換匯</button>
                </div>
                <div id="ex-preview" style="text-align: center; font-size: 0.75rem; color: #888; margin-top: 8px;"></div>
            </div>
        </section>

        <section class="card">
            <h2><i class="fas fa-plus-circle"></i> 新增股票投資</h2>
            <div class="type-switcher" id="stock-currency-container">
                <button class="type-btn active" data-curr="AUD" onclick="setStockCurr('AUD')">澳股AUD</button>
                <button class="type-btn" data-curr="TWD" onclick="setStockCurr('TWD')">台股TWD</button>
                <button class="type-btn" data-curr="USD" onclick="setStockCurr('USD')">美股USD</button>
            </div>
            <input type="hidden" id="stock-curr" value="AUD" />
            <div class="input-flex">
                <input type="text" id="stock-name" placeholder="標的名稱" style="flex:2;">
                <input type="number" id="stock-shares" placeholder="股數" style="flex:1;">
            </div>
            <input type="number" id="stock-cost" placeholder="投入總金額 (含手續費)">
            <button class="btn-primary" onclick="addInvestment()">記錄投資</button>
        </section>

        <section class="card">
            <h2><i class="fas fa-history"></i> 最近紀錄</h2>
            <ul id="transaction-list" style="list-style: none; padding: 0; margin: 0;"></ul>
        </section>
    </div>
    <script src="script.js"></script>
</body>
</html>
